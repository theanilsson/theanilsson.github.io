<!DOCTYPE HTML>
<html>
	<head>
		<title>Thea Nilsson - Gameplay & Systems Programmer</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<link rel="stylesheet" href="assets/css/main.css" />
	</head>
	<body class="landing is-preload">
		<div id="page-wrapper">

			<!-- Header -->
				<header id="header" class="alt">
					<h1><a href="index.html">Portfolio by Thea Nilsson</a></h1>
					<nav id="nav">
						<ul>
							<li><a href="index.html">Home</a></li>
							<li>
								<a href="#">Personal Work Highlights<i class="icon solid fab fa-angle-down" style="color: #fff; padding-left: 0.25em;"></i></a>
								<ul>
									<li><a href="specialization.html">Battle Royale Simulation Using Heatmaps</a></li>
									<li><a href="movement.html">Advanced PhysX Based FPS Movement</a></li>
									<li><a href="enemysystem.html">Diablo 3 Inspired Enemy AI System</a></li>
									<li><a href="pathfinding.html">A-Star NavMesh Pathfinding and Funneling</a></li>
									<li><a href="decals.html">Deferred Rendering Decal System</a></li>
								</ul>
							</li>
							<li><a href="groupprojects.html">Group Projects</a></li>
							<li><a href="aboutme.html">About Me</a></li>
							<li>
								<a href="https://github.com/theanilsson" target="_blank" class="fab fa-github" style="font-size: 1.75em; color:#FFF; padding-right: 0.1em;"></a>
							</li>
							<li>
								<a href="https://www.linkedin.com/in/theanilsson/" target="_blank" class="fab fa-linkedin" style="font-size: 1.75em; color:#FFF; padding-left: 0.1em; padding-right: 0.1em;"></a>
							</li>
							<li>
								<a href="mailto:thea.nom.vy@gmail.com" target="_blank" style="padding-left: 0.1em; padding-right: 0.1em; vertical-align: middle;"><img src="images/Email Icon White.png" alt="" style="width: 2em; height: 1.9em;"/></a>
							</li>
							<li>
								<a href="files/Thea Nilsson CV.pdf" target="_blank" style="padding-left: 0.1em; padding-right: 0.1em; vertical-align: middle;"><img src="images/CV Icon White.png" alt="" style="width: 1.35em; height: 1.9em;"/></a>
							</li>
						</ul>						
					</nav>
				</header>

			<!-- Banner -->
				<section id="banner">
					<h2>Thea Nilsson</h2>
					<p>Gameplay & Systems Programmer</p>
				</section>

			<!-- Main -->
			<section id="main" class="container" style="padding-top: 1em; padding-bottom: 0em;">
				<section class="box special" style="padding: 2em 0 2em 0;">
					<header class="major" style="padding: 0;">
						<h2 style="color: #FFC500;">Advanced PhysX Based FPS Movement</h2>
					</header>
					<span class="image featured" style="width: auto; display: contents;"><img src="images/FpsMovement_SlingSurfSlideSling.gif" alt="" style="width: -webkit-fill-available; justify-self: center; margin: 1.5em 0 2em 0; border-top: #ffffff50 1px solid; border-bottom: #ffffff50 1px solid;"/></span>

					<ul class="actions special" style="margin-bottom: 0;">
						<li><a href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement" target="_blank" class="button alt" style="display: flex;">View the implementation on GitHub<p class="fab fa-github" style="margin: 0 0 0 0.5em; font-size: xx-large; display: flex; align-self: anchor-center;"></p></a></li>
					</ul>
				</section>

				<section class="box special">
					<h4 style="text-align: left; color: #FFC500;">Summary</h4>
					<p style="text-align: left; margin-bottom: 1em;">In our 7th group project at TGA we were tasked with developing an FPS and my team and I settled on the Frontier Defense game mode in Titanfall 2 as our reference game. Our choice in reference game made me very excited since a large portion of the code from Titanfall 2 was ported over to make Apex Legends, one of my all time favorite online games. I have hundreds of hours in Apex and a large portion of those are from playing the character called Pathfinder, who's signature ability is functionally the same grappling hook that players have access to in Titanfall 2.</p>
					<p style="text-align: left; margin-bottom: 0px;">After some discussion about what each of us wanted to focus on in this project, my fellow programmers graciously allowed me to take on the task of singlehandedly developing the movement controller for our player character, including a grappling hook, momentum preserving ground slide, and more. Although the end result that I produced is not a 1:1 recreation of the Titanfall movement, it's not all that far from it in my opinion. Given the scope of our project, the time frame I had to work with and sacrifices I had to make to have it better fit our game, I'm very happy with the result. I also feel that, with more time, I could continue working on the movement to make it even closer to Titanfall's movement.</p>
				</section>

				<section class="box special">
					<h4 style="text-align: left; color: #FFC500;">The Grappling Hook</h4>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 0 0 0.5em 0; margin-bottom: 0;">Pull Direction and Strength Calculations</h5>
							<p style="text-align: left; margin-bottom: 1em;">To emulate the slingshot moves that are possible in Titanfall, my grappling hook takes the current velocity into account as an additive factor to keep pulling the player slightly in the direction that they're already moving instead of straight toward the grapple point.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Pull calculations.png" alt="" style="width: -webkit-fill-available; max-width: 1040px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Spring Dampening</h5>
							<p style="text-align: left; margin-bottom: 1em;">A completely stiff grappling line wouldn't feel very rope-like, so I added some springiness to my grappling hook to make it feel like a rope tugging at you, instead of just a force of gravity pulling you in.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Spring dampening.png" alt="" style="width: -webkit-fill-available; max-width: 786px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Rope Swing</h5>
							<p style="text-align: left; margin-bottom: 1em;">In a similar vein to the additive velocity factor when calculating direction, this part of the force calculation exists to help the slingshot functionality emerge. It does so by calculating your tangential velocity along the pull direction, basically to make it pull you in less when you aren't already moving in the same direction that it's trying to pull you in.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Rope swing.png" alt="" style="width: -webkit-fill-available; max-width: 896px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Fighting the Pull force</h5>
							<p style="text-align: left; margin-bottom: 1em;">To give the player further control of how the swing of the grappling hook ends up I also allow a small amount of directional movement during the grapple, added onto the rest of the calculation results into the PhysX body.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Fighting the pull force.png" alt="" style="width: -webkit-fill-available; max-width: 1100px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Snapping Conditions</h5>
							<p style="text-align: left; margin-bottom: 1em;">Finally I have two main conditions deciding whether to automatically end the grappling, "snapping the line" so to say. One is the player being close to the grappling point, either from having been pulled there over time or by grappling somewhere right next to themselves. The other is that the player has a large velocity away from the grapple point after the grapple forces have already been applied for three fourths of a second, at that point we can assume they are doing a slingshot manuever of some kind.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Snapping conditions.png" alt="" style="width: -webkit-fill-available; max-width: 1100px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
						</div>
					</div>
					<div class="row" style="margin-top: 2em;">
						<div class="col-12">
							<a class="highlightpageanchor2" href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement/blob/main/code/Player.cpp#L637" target="_blank">Go to the function on GitHub</a>
						</div>
					</div>
				</section>

				<section class="box special">
					<h4 style="text-align: left; color: #FFC500;">The Rest of the Movement</h4>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 0 0 0.5em 0; margin-bottom: 0;">Input Mapping</h5>
							<p style="text-align: left; margin-bottom: 1em;">To accomodate both mouse and keyboard as well as gamepads to play our game I leveraged the Command design pattern, encapsulating what triggers certain actions to be controlled by a separate interface from the player controller itself. This also meant that I had to make the movement equal between input given by an omnidirectional joystick and the more limited combinations of cardinal directional inputs possible using the WASD keys.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Input Mapping.png" alt="" style="width: -webkit-fill-available; max-width: 601px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Grounded Check</h5>
							<p style="text-align: left; margin-bottom: 1em;">The grounded check is a simple raycast in the PhysX Scene, casting only against the collision filter/layer of Environmental objects. If environment exists right under our feet at our center of mass, we assume we're grounded.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Grounded check.png" alt="" style="width: -webkit-fill-available; max-width: 895px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
							<a class="highlightpageanchor2" href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement/blob/main/code/Player.cpp#L569" target="_blank">Go to the function on GitHub</a>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Grounded Movement</h5>
							<p style="text-align: left; margin-bottom: 1em;">The movement on the ground is simply a speed scalar multiplied by directional input calculation, using a different scalar based on if the player is sprinting or walking.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Grounded movement.png" alt="" style="width: -webkit-fill-available; max-width: 895px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
							<a class="highlightpageanchor2" href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement/blob/main/code/Player.cpp#L724" target="_blank">Go to the function on GitHub</a>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Ground Slide Boost</h5>
							<p style="text-align: left; margin-bottom: 1em;">At the start of a ground slide I apply a small boost to give the player some extra momentum and to incentivize using all the movement mechanics at their disposal over and over.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Groundslide boost.png" alt="" style="width: -webkit-fill-available; max-width: 1100px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
							<a class="highlightpageanchor2" href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement/blob/main/code/Player.cpp#L762" target="_blank">Go to the function on GitHub</a>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Custom Friction</h5>
							<p style="text-align: left; margin-bottom: 1em;">The custom friction was both a solution nessecary for the scope of our project and a key component of the ground slide mechanic. The scope of our project simply didn't allow for any time allocated to going around configuring various specialized surface materials to use on surfaces in our level to fit the player controller. It was much easier for our scope to just remove friction from all scene objects and delegate that responsibility to the player themselves. When ground sliding, the custom friction preserves most of the current momentum dependent on the surface normal of the object under the player's feet. When walking or sprinting, the custom friction instead acts as a catch all "slow down slightly after the player lets go of their movement input" surface material. In a larger scope this could be adapted to be different based on the name/tag of the PhysX body that was hit by the IsGrounded raycast.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Grounded friction.png" alt="" style="width: -webkit-fill-available; max-width: 1100px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
							<a class="highlightpageanchor2" href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement/blob/main/code/Player.cpp#L694" target="_blank">Go to the function on GitHub</a>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Mid-Air Control</h5>
							<p style="text-align: left; margin-bottom: 1em;">The player is allowed a small amount of directional input control while airborne, fighting against their current velocity to try to change the direction they're headed. Our level designers asked me to give the player more "surf" capability like in counter strike games, so the if statement (at the end of the function) checking against the dot product of steep slopes under the player's feet allows for a little bit of extra air control to allow more of a surf-like behavior.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Mid Air Movement.png" alt="" style="width: -webkit-fill-available; max-width: 1100px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
							<a class="highlightpageanchor2" href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement/blob/main/code/Player.cpp#L770" target="_blank">Go to the function on GitHub</a>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Slingshot Jump</h5>
							<p style="text-align: left; margin-bottom: 1em;">To enable slingshot jumps like those possible when hooking the ground with the Titanfall grappling hook, I simply check if the player is grounded while grappling and launch them at a great velocity upwards along the Y-axis whilst preserving their velocity along the other axes.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Grappling jump.png" alt="" style="width: -webkit-fill-available; max-width: 1100px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
							<a class="highlightpageanchor2" href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement/blob/main/code/Player.cpp#L688" target="_blank">Go to the function on GitHub</a>
						</div>
					</div>
					<div class="row">
						<div class="col-12">
							<h5 style="text-align: left; color: #FF7FE8; padding: 3em 0 0.5em 0; margin-bottom: 0;">Double Jump</h5>
							<p style="text-align: left; margin-bottom: 1em;">Just like in Titanfall, our game has a double jump, and my double jump feels very similar to theirs in my opinion, fighting against any current downwards velocity to act more like an air jet shooting down to lift you rather than just kinematic movement pushing you upwards.</p>
							<span class="image featured" style="width: auto; display: contents;"><img src="images/Double jumping.png" alt="" style="width: -webkit-fill-available; max-width: 1100px; justify-self: center; padding: 0; border: 1px solid #fcfcfc50; border-radius: 2px;"/></span>
							<a class="highlightpageanchor2" href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement/blob/main/code/Player.cpp#L795" target="_blank">Go to the function on GitHub</a>
						</div>
					</div>
				</section>
				
				<section class="box special">
					<h4 style="text-align: left; color: #FFC500;">Highlight Reels</h4>
					<h5 style="text-align: left; color: #FF7FE8; padding: 0 0 0.5em 0; margin-bottom: 0;">Traversing between defense points using the grappling hook</h5>
					<video style="width: -webkit-fill-available; height: auto; padding: 0 0 3em 0;" controls><source src="images/FPS Movement Grappling Highlight Reel.mp4" type="video/mp4">Your browser does not support the video tag.</video>
					<h5 style="text-align: left; color: #FF7FE8; padding: 0 0 0.5em 0; margin-bottom: 0;">Various slingshot jump moves</h5>
					<video style="width: -webkit-fill-available; height: auto; padding: 0 0 3em 0;" controls><source src="images/FPS Movement Slingshot Highlight Reel.mp4" type="video/mp4">Your browser does not support the video tag.</video>
					<h5 style="text-align: left; color: #FF7FE8; padding: 0 0 0.5em 0; margin-bottom: 0;">Using slingshot momentum to parkour</h5>
					<span class="image featured" style="width: auto; display: contents;"><img src="images/FpsMovement_SlingSlideJumpy.gif" alt="" style="width: -webkit-fill-available; justify-self: center; padding: 0 0 3em 0;"/></span>
					<h5 style="text-align: left; color: #FF7FE8; padding: 0 0 0.5em 0; margin-bottom: 0;">Ground hook slingshot into b-hop</h5>
					<span class="image featured" style="width: auto; display: contents;"><img src="images/FpsMovement_GroundSlingBhop.gif" alt="" style="width: -webkit-fill-available; justify-self: center; padding: 0 0 3em 0;"/></span>
					<h5 style="text-align: left; color: #FF7FE8; padding: 0 0 0.5em 0; margin-bottom: 0;">Swing force slingshot</h5>
					<span class="image featured" style="width: auto; display: contents;"><img src="images/FpsMovement_CornerSwingSlide.gif" alt="" style="width: -webkit-fill-available; justify-self: center; padding: 0 0 3em 0;"/></span>
					<h5 style="text-align: left; color: #FF7FE8; padding: 0 0 0.5em 0; margin-bottom: 0;">Smooth swing-up to scale elevation</h5>
					<span class="image featured" style="width: auto; display: contents;"><img src="images/FpsMovement_SwingUp.gif" alt="" style="width: -webkit-fill-available; justify-self: center; padding: 0 0 3em 0;"/></span>
				</section>

				<section class="box special">
					<ul class="actions special" style="margin-bottom: 0;">
						<li><a href="https://github.com/theanilsson/Advanced-PhysX-Based-FPS-Movement" target="_blank" class="button alt" style="display: flex;">View the implementation on GitHub<p class="fab fa-github" style="margin: 0 0 0 0.5em; font-size: xx-large; display: flex; align-self: anchor-center;"></p></a></li>
					</ul>
				</section>
			</section>

			<!-- Footer -->
				<footer id="footer">
					<ul style="list-style-type: none;">
						<li>
							<a href="https://github.com/theanilsson" target="_blank" class="fab fa-github" style="font-size: 1.75em; color:#FFF; padding-right: 0.1em; border-bottom: none; vertical-align: middle;"></a>
							<a href="https://www.linkedin.com/in/theanilsson/" target="_blank" class="fab fa-linkedin" style="font-size: 1.75em; color:#FFF; padding-left: 0.1em; padding-right: 0.1em; border-bottom: none; vertical-align: middle;"></a>
							<a href="mailto:thea.nom.vy@gmail.com" target="_blank" style="padding-left: 0.1em; padding-right: 0.1em; vertical-align: middle; border-bottom: none; vertical-align: middle;"><img src="images/Email Icon White.png" alt="" style="width: 2em; height: 1.9em; vertical-align: middle;"/></a>
							<a href="files/Thea Nilsson CV.pdf" target="_blank" style="padding-left: 0.1em; padding-right: 0.1em; vertical-align: middle; border-bottom: none; vertical-align: middle;"><img src="images/CV Icon White.png" alt="" style="width: 1.35em; height: 1.9em; vertical-align: middle;"/></a>
						</li>
					</ul>
					<ul style="list-style-type: none;">
						<li style="margin-bottom: 1em; color: #FF7FE8; font-size: 0.8em;">This website was designed & developed by Thea Nilsson using only HTML & CSS</li>
						<li style="color: #FF7FE8; font-size: 0.8em;">The initial website framework was based on a template by <a style="border-bottom: none; font-size: inherit;" class="highlightpageanchor2" href="http://html5up.net" target="_blank">HTML5 UP</a></li>
					</ul>
				</footer>

		</div>

		<!-- Scripts -->
			<script src="assets/js/jquery.min.js"></script>
			<script src="assets/js/jquery.dropotron.min.js"></script>
			<script src="assets/js/jquery.scrollex.min.js"></script>
			<script src="assets/js/browser.min.js"></script>
			<script src="assets/js/breakpoints.min.js"></script>
			<script src="assets/js/util.js"></script>
			<script src="assets/js/main.js"></script>

	</body>
</html>